# å°é“çš®æˆé•¿ & é“å…·ç³»ç»Ÿ - å®Œæ•´è®¾è®¡ V4ï¼ˆä¿®è®¢ç‰ˆï¼‰

## ğŸ¯ ç³»ç»Ÿæ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç³»ç»Ÿæ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   è¡Œä¸ºç»Ÿè®¡ â”€â”€ç´¯ç§¯â”€â”€â†’ ç»éªŒå€¼ â”€â”€å‡çº§â”€â”€â†’ ç­‰çº§                  â”‚
â”‚      â”‚                                   â”‚                  â”‚
â”‚      â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚      â”‚              â†“                    â†“          â†“       â”‚
â”‚      â”‚          è§£é”é“å…·             è§£é”æ´»åŠ¨   è§£é”è¡¨æƒ…    â”‚
â”‚      â”‚              â”‚                                       â”‚
â”‚      â”‚              â†“                                       â”‚
â”‚      â”‚          é“å…·èƒŒåŒ… â†â”€â”€ è£…å¤‡ â”€â”€â†’ å¤–è§‚å˜åŒ–              â”‚
â”‚      â”‚                                                      â”‚
â”‚      â””â”€â”€â†’ ç»¼åˆçŠ¶æ€å€¼ â”€â”€â†’ è¡¨æƒ…/åŠ¨ç”»/æ°”æ³¡ä½“ç°ï¼ˆæ— è¡€æ¡ï¼‰                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ç¬¬é›¶é˜¶æ®µï¼šè¡Œä¸ºç»Ÿè®¡åŸ‹ç‚¹

### æ•°æ®ç»“æ„ (åœ¨ save.py ä¸­æ·»åŠ )

```python
behavior_stats = {
    # === åŸºç¡€äº’åŠ¨ ===
    'feed_count': 0,          # å–‚é£Ÿæ¬¡æ•°
    'clean_count': 0,         # æ´—æ¾¡æ¬¡æ•°
    'play_count': 0,          # ç©è€æ¬¡æ•°
    'pet_count': 0,           # æŠšæ‘¸/ç‚¹å‡»æ¬¡æ•°ï¼ˆå‹å¥½çš„ï¼‰
    'comfort_count': 0,       # å®‰æ…°æ¬¡æ•°
    
    # === è®ºæ–‡ç›¸å…³ ===
    'paper_reads': 0,         # è®ºæ–‡é˜…è¯»æ•°
    'paper_likes': 0,         # è®ºæ–‡ç‚¹èµæ•°
    'paper_bookmarks': 0,     # è®ºæ–‡æ”¶è—æ•°
    
    # === ç¤¾äº¤ç›¸å…³ ===
    'chat_count': 0,          # é—²èŠæ¬¡æ•°
    'chat_messages': 0,       # é—²èŠæ¶ˆæ¯æ€»æ•°
    
    # === è´Ÿé¢äº‹ä»¶ ===
    'anger_triggered': 0,     # è§¦å‘ç”Ÿæ°”æ¬¡æ•°
    'disturb_sleep': 0,       # æ‰“æ‰°ç¡çœ æ¬¡æ•°
    'neglect_days': 0,        # ç´¯è®¡å†·è½å¤©æ•°
    'death_count': 0,         # æ­»äº¡æ¬¡æ•°
    
    # === æ—¶é—´ç›¸å…³ ===
    'total_alive_days': 0,    # æ€»å­˜æ´»å¤©æ•°
    'consecutive_care': 0,    # å½“å‰è¿ç»­ç…§é¡¾å¤©æ•°
    'consecutive_care_max': 0,# æœ€é•¿è¿ç»­ç…§é¡¾å¤©æ•°
    'night_interactions': 0,  # æ·±å¤œäº’åŠ¨æ¬¡æ•°
    
    # === é‡Œç¨‹ç¢‘ ===
    'created_at': None,       # å°é“çš®è¯ç”Ÿæ—¶é—´
}
```

### åŸ‹ç‚¹ä½ç½®ç¤ºä¾‹

```python
def feed(self):
    # ... åŸæœ‰å–‚é£Ÿé€»è¾‘ ...
    self.data.behavior_stats['feed_count'] += 1
    self.add_experience(EXP_REWARDS['feed'])
    self.check_new_unlocks()  # æ£€æŸ¥æ˜¯å¦è§£é”æ–°é“å…·
    self.save()
```

---

## â­ ç¬¬ä¸€é˜¶æ®µï¼šæˆé•¿ç³»ç»Ÿ

### 1.1 ç»éªŒå€¼ & ç­‰çº§

```python
# ç»éªŒå€¼è·å–è¡¨
EXP_REWARDS = {
    'feed': 10,
    'clean': 10,
    'play': 15,
    'pet': 2,
    'comfort': 20,
    'chat': 15,
    'chat_message': 3,
    'paper_read': 20,
    'paper_like': 5,
    'paper_bookmark': 10,
    'daily_healthy': 30,
    'consecutive_3': 50,
    'consecutive_7': 100,
}

# ç­‰çº§ç»éªŒéœ€æ±‚ï¼ˆå…¬å¼ï¼šlevel * 100 + (level-1) * 50ï¼‰
def get_required_exp(level):
    """è·å–å‡åˆ°ä¸‹ä¸€çº§éœ€è¦çš„ç´¯è®¡ç»éªŒ"""
    return level * 100 + (level - 1) * 50

def get_level_from_exp(total_exp):
    """æ ¹æ®æ€»ç»éªŒè®¡ç®—ç­‰çº§"""
    level = 1
    while total_exp >= get_required_exp(level):
        level += 1
    return level - 1 if level > 1 else 1

def get_exp_progress(total_exp, level):
    """è·å–å½“å‰ç­‰çº§çš„ç»éªŒè¿›åº¦"""
    current_level_exp = get_required_exp(level - 1) if level > 1 else 0
    next_level_exp = get_required_exp(level)
    current = total_exp - current_level_exp
    needed = next_level_exp - current_level_exp
    return (current, needed)
```

### 1.2 ç­‰çº§é˜¶æ®µ

```python
LEVEL_STAGES = {
    (1, 5): {'stage': 'å¹¼å¹´æœŸ', 'title': 'å°èŒæ–°', 'color': '#90EE90'},
    (6, 15): {'stage': 'æˆé•¿æœŸ', 'title': 'å°ä¼™ä¼´', 'color': '#87CEEB'},
    (16, 30): {'stage': 'æˆç†ŸæœŸ', 'title': 'å¥½æœ‹å‹', 'color': '#DDA0DD'},
    (31, 50): {'stage': 'å·…å³°æœŸ', 'title': 'æŒšå‹', 'color': '#FFD700'},
    (51, 999): {'stage': 'ä¼ è¯´æœŸ', 'title': 'çµé­‚ä¼´ä¾£', 'color': '#FF69B4'},
}
```

### 1.3 å‡çº§é€šçŸ¥ï¼ˆç®€åŒ–ç‰ˆï¼‰

```python
def on_level_up(self, old_level, new_level):
    """å‡çº§æ—¶çš„å¤„ç†"""
    # 1. æ’­æ”¾è·³è·ƒåŠ¨ç”»ï¼ˆå¤ç”¨ç°æœ‰ï¼‰
    self.play_animation('jump')
    
    # 2. æ˜¾ç¤ºå‡çº§æ°”æ³¡
    self.show_bubble(f"â­ å‡çº§äº†ï¼Lv.{new_level}", style='celebration')
    
    # 3. æ£€æŸ¥æ–°é“å…·è§£é”
    new_items = self.check_new_unlocks()
    if new_items:
        item_names = [ITEMS[i]['name'] for i in new_items]
        self.show_bubble(f"ğŸ è·å¾—: {', '.join(item_names)}", delay=2000)
```

### 1.4 å­˜æ¡£æ•°æ®

```python
growth_data = {
    'total_exp': 0,
    'level': 1,
}
```

---

## ğŸ® ç¬¬ä¸€é˜¶æ®µï¼šå¤´é¡¶ UIï¼ˆæç®€ç‰ˆï¼‰

### 2.1 è®¾è®¡å†³ç­–

- âœ… æ˜¾ç¤ºï¼šç­‰çº§æ ‡ç­¾ï¼ˆä»…æ–‡å­—ï¼‰
- âŒ ä¸æ˜¾ç¤ºï¼šè¡€æ¡ï¼ˆå°é“çš®æ²¡æœ‰è¡€æ¡ï¼çŠ¶æ€é€šè¿‡è¡¨æƒ…/åŠ¨ç”»/æ°”æ³¡ä½“ç°ï¼‰
- âŒ ä¸æ˜¾ç¤ºï¼šç»éªŒæ¡ï¼ˆå‡çº§æ—¶ç”¨æ°”æ³¡é€šçŸ¥ä»£æ›¿ï¼‰

**è®¾è®¡ç†å¿µ**ï¼šå°é“çš®æ˜¯ä¸€ä¸ªæœ‰æƒ…æ„Ÿçš„ä¼™ä¼´ï¼Œä¸æ˜¯æ¸¸æˆé‡Œçš„æ€ªç‰©ã€‚è¡€æ¡ä¼šè®©æ•´ä½“æ„Ÿè§‰åƒæ‰“æ€ªæ¸¸æˆï¼Œä¸ç¬¦åˆé™ªä¼´å®šä½ã€‚çŠ¶æ€å¥½ä¸å¥½ï¼Œç”¨æˆ·é€šè¿‡å°é“çš®çš„è¡¨æƒ…å’Œè¡Œä¸ºå°±èƒ½æ„ŸçŸ¥åˆ°ã€‚

```
      Lv.15
  
      (å°é“çš®)
```

### 2.2 å¤´é¡¶ UI é…ç½®

```python
HEAD_UI_CONFIG = {
    # ä»…ç­‰çº§æ ‡ç­¾ï¼Œæ— è¡€æ¡
    'level_label': {
        'offset_y': -10,  # ç›¸å¯¹äºå°é“çš®é¡¶éƒ¨
        'font_size': 8,
        'color': '#FFFFFF',
        'shadow_color': '#000000',
    },
}
```

### 2.3 æ¸²æŸ“é€»è¾‘ï¼ˆåŠ¨æ€ä½ç½®ï¼‰

```python
def render_head_ui(self, canvas, pet_x, pet_y, pet_width):
    """
    æ¸²æŸ“å¤´é¡¶ UIï¼ˆä»…ç­‰çº§æ ‡ç­¾ï¼‰
    æ³¨æ„ï¼špet_x, pet_y æ˜¯å½“å‰å¸§çš„å®é™…æ¸²æŸ“ä½ç½®ï¼ˆå·²åŒ…å«è·³è·ƒ/æ‹–æ‹½åç§»ï¼‰
    """
    config = HEAD_UI_CONFIG
    
    # è®¡ç®—ä¸­å¿ƒä½ç½®ï¼ˆåŸºäºå½“å‰æ¸²æŸ“ä½ç½®ï¼‰
    center_x = pet_x + pet_width // 2
    top_y = pet_y  # å°é“çš®é¡¶éƒ¨
    
    # æ¸²æŸ“ç­‰çº§æ ‡ç­¾
    level = self.data.growth_data['level']
    label_y = top_y + config['level_label']['offset_y']
    
    # æ–‡å­—é˜´å½±ï¼ˆ1pxåç§»ï¼Œåˆ¶é€ åƒç´ é˜´å½±æ•ˆæœï¼‰
    canvas.create_text(
        center_x + 1, label_y + 1,
        text=f"Lv.{level}",
        fill=config['level_label']['shadow_color'],
        font=('Arial', 8, 'bold'),
        anchor='center'
    )
    # æ–‡å­—ä¸»ä½“
    canvas.create_text(
        center_x, label_y,
        text=f"Lv.{level}",
        fill=config['level_label']['color'],
        font=('Arial', 8, 'bold'),
        anchor='center'
    )
```

---

## ğŸ“¦ ç¬¬äºŒé˜¶æ®µï¼šé“å…·ç³»ç»Ÿ

### 3.1 åŸºç¡€å®šä¹‰

```python
class ItemSlot:
    HEAD = 'head'
    FACE = 'face'
    NECK = 'neck'
    HAND = 'hand'
    EFFECT = 'effect'

class ItemRarity:
    COMMON = 'common'
    UNCOMMON = 'uncommon'
    RARE = 'rare'
    EPIC = 'epic'
    LEGENDARY = 'legendary'

RARITY_COLORS = {
    'common': '#FFFFFF',
    'uncommon': '#4ADE80',
    'rare': '#60A5FA',
    'epic': '#A855F7',
    'legendary': '#F59E0B',
}
```

### 3.2 çŠ¶æ€é€‚é…è§„åˆ™ï¼ˆé‡è¦ï¼ï¼‰

```python
# è¿™äº›çŠ¶æ€ä¸‹éšè—æ‰€æœ‰é“å…·
HIDE_ITEMS_STATES = ['sleep', 'dizzy', 'dead', 'sick']

# æ‹–æ‹½çŠ¶æ€çš„åç§»è°ƒæ•´ï¼ˆé“å…·è·Ÿç€å˜å½¢ï¼‰
DRAGGING_OFFSET_ADJUST = {
    'head': (0, 1),
    'face': (0, 1),
    'neck': (0, 0),
}

# ä½“å‹åç§»è¡¥å¿
BODY_TYPE_OFFSET = {
    'normal': (0, 0),
    'fat': (1, 0),    # èƒ–ç‰ˆå¾€å³å1åƒç´ 
    'thin': (-1, 0),  # ç˜¦ç‰ˆå¾€å·¦å1åƒç´ 
}

def should_show_items(state):
    """åˆ¤æ–­å½“å‰çŠ¶æ€æ˜¯å¦æ˜¾ç¤ºé“å…·"""
    return state not in HIDE_ITEMS_STATES

def get_item_offset(item, state, body_type):
    """è·å–é“å…·çš„æœ€ç»ˆåç§»é‡"""
    base_offset = item['offset']
    
    # ä½“å‹è¡¥å¿
    body_adj = BODY_TYPE_OFFSET.get(body_type, (0, 0))
    
    # æ‹–æ‹½è°ƒæ•´
    drag_adj = (0, 0)
    if state == 'dragging':
        drag_adj = DRAGGING_OFFSET_ADJUST.get(item['slot'], (0, 0))
    
    return (
        base_offset[0] + body_adj[0] + drag_adj[0],
        base_offset[1] + body_adj[1] + drag_adj[1]
    )
```

### 3.3 é“å…·åç§»åŸºå‡†è¯´æ˜

**é‡è¦**ï¼šæ‰€æœ‰é“å…·åç§»é‡åŸºäº **è½®å»“åŒ–åçš„ç²¾çµå·¦ä¸Šè§’**

```
è½®å»“åŒ–åçš„ç²¾çµåæ ‡ç³»ï¼š
(0,0) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ X
  â”‚  â”Œâ”€è½®å»“è¾¹æ¡†â”€â”
  â”‚  â”‚ åŸå§‹ç²¾çµ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†“
  Y

åç§» (2, -3) è¡¨ç¤ºï¼š
- ä»è½®å»“ç²¾çµå·¦ä¸Šè§’å‘å³ 2 åƒç´ 
- å‘ä¸Š 3 åƒç´ ï¼ˆè´Ÿæ•°å‘ä¸Šï¼‰
```

---

## ğŸ¨ é“å…·ç²¾çµå›¾å®šä¹‰

### 4.1 é“å…·é¢œè‰²æ‰©å±•

```python
# åœ¨ COLORS ä¸­æ·»åŠ é“å…·é¢œè‰²
ITEM_COLORS = {
    # å†’é™©å¸½ï¼ˆç»¿è‰²ç³»ï¼‰
    40: '#4A7C4E',  # æ£®æ—ç»¿ - å¸½èº«
    41: '#6B9E6F',  # æµ…ç»¿ - å¸½å­é«˜å…‰
    42: '#3D5940',  # æ·±ç»¿ - å¸½å­é˜´å½±
    
    # è´è¶ç»“ï¼ˆç²‰è‰²ç³»ï¼‰
    43: '#FF69B4',  # ç²‰è‰² - ä¸»è‰²
    44: '#FF8DC7',  # æµ…ç²‰ - é«˜å…‰
    45: '#DB4B8A',  # æ·±ç²‰ - é˜´å½±
    
    # ç¡å¸½ï¼ˆè“è‰²ç³»ï¼‰
    46: '#4169E1',  # çš‡å®¶è“ - ä¸»è‰²
    47: '#87CEEB',  # å¤©è“ - æ¡çº¹
    48: '#2D4A8B',  # æ·±è“ - é˜´å½±
    
    # çœ¼é•œ
    49: '#2D2D2D',  # é»‘è‰²æ¡†
    50: '#4A4A4A',  # ç°è‰²æ¡†
    
    # å›´å·¾ï¼ˆçº¢è‰²ç³»ï¼‰
    51: '#DC2626',  # çº¢è‰² - ä¸»è‰²
    52: '#EF4444',  # æµ…çº¢ - é«˜å…‰
    53: '#B91C1C',  # æ·±çº¢ - é˜´å½±
    
    # çš‡å† ï¼ˆé‡‘è‰²ç³»ï¼‰
    54: '#F59E0B',  # é‡‘è‰² - ä¸»è‰²
    55: '#FCD34D',  # æµ…é‡‘ - é«˜å…‰
    56: '#D97706',  # æ·±é‡‘ - é˜´å½±
    57: '#EF4444',  # çº¢å®çŸ³
    58: '#3B82F6',  # è“å®çŸ³
}
```

### 4.2 é“å…·ç²¾çµå›¾

```python
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  å¤´éƒ¨é“å…·
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# å†’é™©å°å¸½ (8x4)
# ä¸€é¡¶ç»¿è‰²çš„å¸ƒå¸½ï¼Œæœ‰ç‚¹åƒæ—å…‹çš„å¸½å­
SPRITE_HAT_ADVENTURE = [
    [0,  0, 40, 40, 40, 40,  0,  0],
    [0, 40, 41, 41, 41, 40, 40,  0],
    [40, 40, 40, 40, 40, 40, 40, 40],
    [0, 42,  0,  0,  0,  0, 42,  0],
]

# è´è¶ç»“ (7x4)
# ç²‰è‰²å¤§è´è¶ç»“
SPRITE_HAT_BOW = [
    [43,  0,  0,  0,  0,  0, 43],
    [43, 43, 44, 45, 44, 43, 43],
    [0,  43, 45, 45, 45, 43,  0],
    [0,   0, 45, 45, 45,  0,  0],
]

# ç¡å¸½ (8x5)
# è“è‰²æ¡çº¹ç¡å¸½ï¼Œå¸¦ç™½è‰²ç»’çƒ
SPRITE_HAT_SLEEP = [
    [0,  0,  0,  0,  0, 14, 14,  0],
    [0,  0,  0, 46, 47, 46, 14,  0],
    [0,  0, 46, 47, 46, 47, 46,  0],
    [0, 46, 47, 46, 47, 46, 47, 46],
    [48, 46, 46, 46, 46, 46, 46, 48],
]

# å°çš‡å†  (8x4)
# é‡‘è‰²çš‡å† ï¼Œé•¶åµŒçº¢è“å®çŸ³
SPRITE_HAT_CROWN = [
    [0, 55,  0, 55,  0, 55,  0,  0],
    [54, 54, 54, 54, 54, 54, 54,  0],
    [54, 57, 54, 58, 54, 57, 54,  0],
    [56, 54, 54, 54, 54, 54, 56,  0],
]

# å°èŠ± (5x4)
# ç²‰è‰²å°èŠ±ï¼Œæˆ´åœ¨è€³æœµæ—è¾¹
SPRITE_HAT_FLOWER = [
    [0, 44,  0, 44,  0],
    [44, 43, 44, 43, 44],
    [0, 44, 55, 44,  0],
    [0,  0, 41,  0,  0],
]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  è„¸éƒ¨é“å…·
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# åœ†æ¡†çœ¼é•œ (8x3)
# è¦†ç›–åœ¨çœ¼ç›ä½ç½®ï¼Œé•œç‰‡æ˜¯é€æ˜çš„ï¼ˆæ˜¾ç¤ºåŸæœ¬çš„çœ¼ç›ï¼‰
SPRITE_GLASSES_ROUND = [
    [0, 49, 49,  0,  0, 49, 49,  0],
    [49,  0,  0, 49, 49,  0,  0, 49],
    [0, 49, 49,  0,  0, 49, 49,  0],
]

# å­¦è€…çœ¼é•œ (8x2)
# æ–¹æ¡†çœ¼é•œ
SPRITE_GLASSES_SCHOLAR = [
    [49, 49, 49, 49, 49, 49, 49, 49],
    [49,  0, 49, 49, 49,  0, 49,  0],
]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  è„–å­é“å…·
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# çº¢å›´å·¾ (10x3)
# å›´åœ¨è„–å­ä¸Šï¼Œä¸¤ç«¯å‚ä¸‹
SPRITE_SCARF_RED = [
    [0, 51, 51, 51, 51, 51, 51, 51, 51,  0],
    [51, 52, 51, 51, 51, 51, 51, 51, 52, 51],
    [53,  0,  0,  0,  0,  0,  0,  0,  0, 53],
]

# å½©è™¹å›´å·¾ (10x3)
SPRITE_SCARF_RAINBOW = [
    [0, 51, 54, 55, 41, 47, 44, 54, 51,  0],
    [51, 52, 55, 41, 47, 44, 55, 41, 52, 51],
    [53,  0,  0,  0,  0,  0,  0,  0,  0, 53],
]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#  ç‰¹æ•ˆé“å…·ï¼ˆè¦†ç›–æ•´ä¸ªèº«ä½“çš„ç²’å­/å…‰æ•ˆï¼‰
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# é—ªé—ªå‘å…‰ - ä¸æ˜¯é™æ€ç²¾çµï¼Œè€Œæ˜¯ç²’å­é…ç½®
EFFECT_SPARKLE_CONFIG = {
    'type': 'particle',
    'particle_sprite': [[55], [14]],  # å°å…‰ç‚¹
    'count': 5,
    'radius': 20,
    'speed': 0.5,
    'fade': True,
}

# çˆ±å¿ƒç¯ç»• - ç²’å­é…ç½®
EFFECT_HEARTS_CONFIG = {
    'type': 'particle',
    'particle_sprite': [
        [0, 43, 0, 43, 0],
        [43, 43, 43, 43, 43],
        [0, 43, 43, 43, 0],
        [0, 0, 43, 0, 0],
    ],
    'count': 3,
    'radius': 25,
    'speed': 0.3,
    'orbit': True,
}
```

### 4.3 é“å…·å®šä¹‰å®Œæ•´ç‰ˆ

```python
ITEMS = {
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # å¤´éƒ¨é“å…·
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    'hat_adventure': {
        'id': 'hat_adventure',
        'name': 'å†’é™©å°å¸½',
        'slot': ItemSlot.HEAD,
        'description': 'ä¸€é¡¶å……æ»¡å†’é™©ç²¾ç¥çš„å°å¸½å­',
        'rarity': ItemRarity.COMMON,
        'sprite': SPRITE_HAT_ADVENTURE,
        'offset': (1, -3),  # åŸºäºè½®å»“åŒ–ç²¾çµå·¦ä¸Šè§’
        'unlock': {'type': 'default'},
    },
    'hat_bow': {
        'id': 'hat_bow',
        'name': 'è´è¶ç»“',
        'slot': ItemSlot.HEAD,
        'description': 'å¯çˆ±çš„ç²‰è‰²è´è¶ç»“',
        'rarity': ItemRarity.COMMON,
        'sprite': SPRITE_HAT_BOW,
        'offset': (2, -2),
        'unlock': {'type': 'default'},
    },
    'hat_sleep': {
        'id': 'hat_sleep',
        'name': 'ç¡å¸½',
        'slot': ItemSlot.HEAD,
        'description': 'è“è‰²æ¡çº¹çš„ç»å…¸ç¡å¸½',
        'rarity': ItemRarity.COMMON,
        'sprite': SPRITE_HAT_SLEEP,
        'offset': (1, -4),
        'unlock': {'type': 'default'},
        'auto_equip': {'state': 'sleep'},  # ç¡è§‰è‡ªåŠ¨æˆ´ï¼ˆä½†sleepçŠ¶æ€éšè—é“å…·ï¼Œè¿™ä¸ªä½œä¸ºè®°å½•ï¼‰
    },
    'hat_crown': {
        'id': 'hat_crown',
        'name': 'å°çš‡å† ',
        'slot': ItemSlot.HEAD,
        'description': 'é—ªé—ªå‘å…‰çš„é‡‘è‰²çš‡å† ï¼Œä¼ è¯´ä¸­çš„é“å…·',
        'rarity': ItemRarity.LEGENDARY,
        'sprite': SPRITE_HAT_CROWN,
        'offset': (1, -3),
        'unlock': {'type': 'level', 'level': 50},
    },
    'hat_flower': {
        'id': 'hat_flower',
        'name': 'å°èŠ±',
        'slot': ItemSlot.HEAD,
        'description': 'æˆ´åœ¨è€³è¾¹çš„ç²‰è‰²å°èŠ±',
        'rarity': ItemRarity.UNCOMMON,
        'sprite': SPRITE_HAT_FLOWER,
        'offset': (6, -1),  # åå³ï¼Œæˆ´åœ¨è€³æœµä¸Š
        'unlock': {'type': 'level', 'level': 10},
    },
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # è„¸éƒ¨é“å…·
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    'glasses_round': {
        'id': 'glasses_round',
        'name': 'åœ†æ¡†çœ¼é•œ',
        'slot': ItemSlot.FACE,
        'description': 'æ–‡è‰ºå¤å¤çš„åœ†æ¡†çœ¼é•œ',
        'rarity': ItemRarity.COMMON,
        'sprite': SPRITE_GLASSES_ROUND,
        'offset': (1, 3),  # å¯¹å‡†çœ¼ç›ä½ç½®
        'unlock': {'type': 'default'},
    },
    'glasses_scholar': {
        'id': 'glasses_scholar',
        'name': 'å­¦è€…çœ¼é•œ',
        'slot': ItemSlot.FACE,
        'description': 'æ–¹æ¡†çœ¼é•œï¼Œè¯»äº†å¤ªå¤šè®ºæ–‡çš„è¯æ˜',
        'rarity': ItemRarity.RARE,
        'sprite': SPRITE_GLASSES_SCHOLAR,
        'offset': (1, 4),
        'unlock': {'type': 'stat', 'stat': 'paper_reads', 'value': 50},
    },
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # è„–å­é“å…·
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    'scarf_red': {
        'id': 'scarf_red',
        'name': 'çº¢å›´å·¾',
        'slot': ItemSlot.NECK,
        'description': 'æ¸©æš–çš„çº¢è‰²å°å›´å·¾',
        'rarity': ItemRarity.COMMON,
        'sprite': SPRITE_SCARF_RED,
        'offset': (0, 6),
        'unlock': {'type': 'default'},
    },
    'scarf_rainbow': {
        'id': 'scarf_rainbow',
        'name': 'å½©è™¹å›´å·¾',
        'slot': ItemSlot.NECK,
        'description': 'ä¸ƒå½©çš„å›´å·¾ï¼ŒåšæŒç…§é¡¾30å¤©çš„è¯æ˜',
        'rarity': ItemRarity.EPIC,
        'sprite': SPRITE_SCARF_RAINBOW,
        'offset': (0, 6),
        'unlock': {'type': 'stat', 'stat': 'consecutive_care_max', 'value': 30},
    },
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ç‰¹æ•ˆé“å…·
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    'effect_sparkle': {
        'id': 'effect_sparkle',
        'name': 'é—ªé—ªå‘å…‰',
        'slot': ItemSlot.EFFECT,
        'description': 'æµ‘èº«æ•£å‘ç€å…‰èŠ’ï¼ˆæ´—äº†100æ¬¡æ¾¡çš„ç»“æœï¼‰',
        'rarity': ItemRarity.RARE,
        'sprite': None,  # ç‰¹æ•ˆç”¨é…ç½®è€Œéç²¾çµ
        'config': EFFECT_SPARKLE_CONFIG,
        'offset': (0, 0),
        'unlock': {'type': 'stat', 'stat': 'clean_count', 'value': 100},
    },
    'effect_hearts': {
        'id': 'effect_hearts',
        'name': 'çˆ±å¿ƒç¯ç»•',
        'slot': ItemSlot.EFFECT,
        'description': 'è¢«çˆ±åŒ…å›´ç€',
        'rarity': ItemRarity.EPIC,
        'sprite': None,
        'config': EFFECT_HEARTS_CONFIG,
        'offset': (0, 0),
        'unlock': {'type': 'intimacy', 'value': 100},
    },
}
```

---

## ğŸ”— é“å…·æ¸²æŸ“é›†æˆ

### 5.1 æ¸²æŸ“é¡ºåºï¼ˆç®€åŒ–ç‰ˆï¼‰

```python
def render_pet_with_items(self):
    """æ¸²æŸ“å°é“çš®ï¼ˆå«é“å…·ï¼‰"""
    state = self.current_state
    body_type = self.data.body_type
    
    # 1. ç”»æŠ•å½±
    self.draw_shadow()
    
    # 2. ç”»èº«ä½“ï¼ˆå¸¦è½®å»“ï¼‰
    outlined_sprite = self.get_outlined_sprite(state, body_type)
    self.draw_sprite(outlined_sprite, self.x, self.y)
    
    # 3. ç”»é“å…·ï¼ˆå¦‚æœå½“å‰çŠ¶æ€å…è®¸ï¼‰
    if should_show_items(state):
        self.draw_equipped_items(state, body_type)
    
    # 4. ç”»å¤´é¡¶ç­‰çº§æ ‡ç­¾ï¼ˆä»… Lv.Xï¼Œæ— è¡€æ¡ï¼‰
    self.render_head_ui(self.canvas, self.x, self.y, self.pet_width)
```

### 5.2 é“å…·æ¸²æŸ“å‡½æ•°

```python
def draw_equipped_items(self, state, body_type):
    """æ¸²æŸ“å·²è£…å¤‡çš„é“å…·"""
    equipped = self.data.inventory['equipped']
    
    # æŒ‰å±‚çº§é¡ºåºæ¸²æŸ“ï¼šè„–å­ â†’ è„¸ â†’ å¤´
    render_order = ['neck', 'face', 'head', 'effect']
    
    for slot in render_order:
        item_id = equipped.get(slot)
        if not item_id:
            continue
            
        item = ITEMS[item_id]
        
        # ç‰¹æ•ˆé“å…·ç‰¹æ®Šå¤„ç†
        if slot == 'effect' and item.get('config'):
            self.render_particle_effect(item['config'])
            continue
        
        # è®¡ç®—æœ€ç»ˆåç§»
        offset = get_item_offset(item, state, body_type)
        
        # è®¡ç®—ç»˜åˆ¶ä½ç½®ï¼ˆåŸºäºè½®å»“åŒ–ç²¾çµå·¦ä¸Šè§’ï¼‰
        item_x = self.x + offset[0] * PIXEL_SIZE
        item_y = self.y + offset[1] * PIXEL_SIZE
        
        # ç»˜åˆ¶é“å…·ç²¾çµ
        self.draw_item_sprite(item['sprite'], item_x, item_y)

def draw_item_sprite(self, sprite, x, y):
    """ç»˜åˆ¶é“å…·ç²¾çµ"""
    colors = self.get_all_colors()  # åŒ…å« ITEM_COLORS
    
    for row_idx, row in enumerate(sprite):
        for col_idx, color_code in enumerate(row):
            if color_code == 0:
                continue
            color = colors.get(color_code, '#FF00FF')
            px = x + col_idx * PIXEL_SIZE
            py = y + row_idx * PIXEL_SIZE
            self.canvas.create_rectangle(
                px, py, px + PIXEL_SIZE, py + PIXEL_SIZE,
                fill=color, outline=''
            )
```

---

## ğŸ’¾ å­˜æ¡£æ•°æ®ç»“æ„

### 6.1 å®Œæ•´å­˜æ¡£ç»“æ„

```python
# save.py ä¸­çš„å®Œæ•´æ•°æ®ç»“æ„
pet_data = {
    # åŸæœ‰æ•°æ®
    'hunger': 80,
    'cleanliness': 80,
    'happiness': 80,
    'vitality': 50,
    'intimacy': 0,
    'body_type': 'normal',
    'is_dead': False,
    # ... å…¶ä»–åŸæœ‰å­—æ®µ ...
    
    # æ–°å¢ï¼šæˆé•¿æ•°æ®
    'growth_data': {
        'total_exp': 0,
        'level': 1,
    },
    
    # æ–°å¢ï¼šè¡Œä¸ºç»Ÿè®¡
    'behavior_stats': {
        'feed_count': 0,
        'clean_count': 0,
        'play_count': 0,
        'paper_reads': 0,
        # ... å®Œæ•´å­—æ®µè§ä¸Šæ–‡ ...
    },
    
    # æ–°å¢ï¼šé“å…·æ•°æ®
    'inventory': {
        'owned_items': ['hat_adventure', 'hat_bow', 'hat_sleep', 
                       'glasses_round', 'scarf_red'],  # é»˜è®¤é“å…·
        'equipped': {
            'head': None,
            'face': None,
            'neck': None,
            'hand': None,
            'effect': None,
        },
    },
}
```

### 6.2 å­˜æ¡£å…¼å®¹å¤„ç†

```python
def load_save(filepath):
    """åŠ è½½å­˜æ¡£ï¼Œå…¼å®¹æ—§ç‰ˆæœ¬"""
    data = json.load(open(filepath))
    
    # å¦‚æœæ²¡æœ‰æ–°å­—æ®µï¼Œç”¨é»˜è®¤å€¼åˆå§‹åŒ–
    if 'growth_data' not in data:
        data['growth_data'] = {'total_exp': 0, 'level': 1}
    
    if 'behavior_stats' not in data:
        data['behavior_stats'] = get_default_behavior_stats()
    
    if 'inventory' not in data:
        data['inventory'] = {
            'owned_items': ['hat_adventure', 'hat_bow', 'hat_sleep', 
                          'glasses_round', 'scarf_red'],
            'equipped': {slot: None for slot in ['head', 'face', 'neck', 'hand', 'effect']},
        }
    
    return data
```

---

## ğŸ–¼ï¸ èƒŒåŒ… UI

### 7.0 è§†è§‰é£æ ¼è§„èŒƒï¼ˆâš ï¸ é‡è¦ï¼‰

**èƒŒåŒ…çª—å£å¿…é¡»ä¸ã€Œå­¦æœ¯æ—¥æŠ¥ã€ä½¿ç”¨ç»Ÿä¸€çš„è§†è§‰é£æ ¼ä½“ç³»ï¼**

ä¸¤è€…åŒå±å°é“çš®çš„å¼¹çª—ç³»ç»Ÿï¼Œåº”å½“æœ‰ä¸€è‡´çš„è®¾è®¡è¯­è¨€ï¼š
- å­¦æœ¯æ—¥æŠ¥ = è¯»è®ºæ–‡çš„çª—å£
- èƒŒåŒ… = æ¢è£…çš„çª—å£
- æœªæ¥å…¶ä»–å¼¹çª—ï¼ˆè®¾ç½®ã€æˆå°±ç­‰ï¼‰ä¹Ÿåº”å¤ç”¨åŒä¸€å¥—

#### ç»Ÿä¸€é£æ ¼è¦ç´ 

```python
# å…±äº«çª—å£ä¸»é¢˜é…ç½®ï¼ˆå»ºè®®æŠ½å‡º ui_theme.py å¤ç”¨ï¼‰
WINDOW_THEME = {
    # é…è‰²
    'bg_primary': '#FAF0E4',       # å¥¶æ²¹è‰²ä¸»èƒŒæ™¯
    'bg_card': '#FDF8F0',          # å¡ç‰‡/åˆ†åŒºèƒŒæ™¯
    'bg_card_hover': '#FFF3E0',    # å¡ç‰‡æ‚¬åœ/é€‰ä¸­
    'bg_card_inner': '#FFF9F0',    # å†…éƒ¨å…ƒç´ èƒŒæ™¯
    
    'border_primary': '#C4956A',   # ä¸»è¦è¾¹æ¡†ï¼ˆæ£•è‰²ï¼‰
    'border_light': '#E8D8C4',     # æ¬¡è¦è¾¹æ¡†/åˆ†å‰²çº¿
    'border_dashed': '#D4C4B0',    # è™šçº¿è¾¹æ¡†
    
    'text_title': '#FFF9F0',       # æ ‡é¢˜æ æ–‡å­—ï¼ˆç™½ï¼‰
    'text_primary': '#5C3D2E',     # ä¸»è¦æ–‡å­—ï¼ˆæ·±æ£•ï¼‰
    'text_secondary': '#A0896C',   # æ¬¡è¦æ–‡å­—
    'text_muted': '#D4C4B0',      # å¼±åŒ–æ–‡å­—
    'text_label': '#A0522D',       # æ ‡ç­¾æ–‡å­—
    
    'title_bar_bg': '#A0522D',     # æ ‡é¢˜æ èƒŒæ™¯ï¼ˆæ·±æ£•ï¼‰
    'title_bar_border': '#7A4A2A', # æ ‡é¢˜æ åº•éƒ¨è¾¹æ¡†
    
    # æŒ‰é’®ï¼ˆåƒç´ å‡¸èµ·é£æ ¼ï¼‰
    'btn_primary_bg': '#A0522D',
    'btn_primary_highlight': '#D4B896',
    'btn_primary_shadow': '#7A4A2A',
    'btn_secondary_bg': '#C4956A',
    
    # åˆ†åŒºæ¡†æ ·å¼
    'section_border': '#C4956A',   # fieldset è¾¹æ¡†
    'section_label_color': '#A0522D',  # legend æ–‡å­—
}
```

#### åˆ†åŒºæ¡†æ ·å¼ï¼ˆTkinter å®ç°ï¼‰

```python
def create_section_frame(parent, label, **kwargs):
    """
    åˆ›å»ºç»Ÿä¸€é£æ ¼çš„åˆ†åŒºæ¡†
    è§†è§‰æ•ˆæœç±»ä¼¼ HTML fieldset + legend
    ç”¨ LabelFrame å®ç°ï¼Œé…åˆåƒç´ é£é…è‰²
    """
    frame = tk.LabelFrame(
        parent,
        text=f" {label} ",
        bg=WINDOW_THEME['bg_card'],
        fg=WINDOW_THEME['section_label_color'],
        font=('Arial', 8, 'bold'),  # å°å­—å·
        bd=2,
        relief='solid',
        highlightbackground=WINDOW_THEME['section_border'],
        highlightthickness=0,
        padx=8, pady=6,
        **kwargs
    )
    return frame
```

#### åƒç´ é£æŒ‰é’®ï¼ˆTkinter å®ç°ï¼‰

```python
def create_pixel_button(parent, text, command, primary=False):
    """
    åƒç´ å‡¸èµ·é£æ ¼æŒ‰é’®
    é€šè¿‡ relief + é…è‰²æ¨¡æ‹Ÿåƒç´ æŒ‰é’®çš„ç«‹ä½“æ„Ÿ
    """
    theme = WINDOW_THEME
    bg = theme['btn_primary_bg'] if primary else theme['btn_secondary_bg']
    
    btn = tk.Button(
        parent,
        text=text,
        command=command,
        bg=bg,
        fg=theme['text_title'],
        font=('Arial', 9, 'bold'),
        bd=2,
        relief='raised',
        activebackground=theme['title_bar_border'],
        padx=16, pady=4,
        cursor='hand2',
    )
    return btn
```

### 7.1 çª—å£å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [é“çš®å¤´åƒ] å°é“çš®çš„èƒŒåŒ…              Lv.1 å°èŒæ–°    â”‚  â† æ·±æ£•æ ‡é¢˜æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚  â† å¥¶æ²¹è‰²èƒŒæ™¯
â”‚  â”Œâ”€ é¢„è§ˆ â”€â”€â”€â”€â”€â”€â”  â”Œâ”€ å·²è£…å¤‡ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              â”‚  â”‚  å¤´éƒ¨ â–¸ å†’é™©å°å¸½              â”‚  â”‚
â”‚  â”‚  ï¼ˆå°é“çš®    â”‚  â”‚  è„¸éƒ¨ â–¸ åœ†æ¡†çœ¼é•œ              â”‚  â”‚
â”‚  â”‚   å½“å‰è£…æ‰®   â”‚  â”‚  è„–å­ â–¸ çº¢å›´å·¾                â”‚  â”‚
â”‚  â”‚   å®æ—¶é¢„è§ˆï¼‰ â”‚  â”‚  ç‰¹æ•ˆ â–¸ ï¼ˆç©ºï¼‰                â”‚  â”‚
â”‚  â”‚              â”‚  â”‚                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â—ˆ 5/10 ä»¶é“å…·               â”‚  â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€ é“å…·æ  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚iconâ”‚ â”‚iconâ”‚ â”‚iconâ”‚ â”‚iconâ”‚ â”‚iconâ”‚  ...      â”‚   â”‚
â”‚  â”‚  â”‚åå­—â”‚ â”‚åå­—â”‚ â”‚åå­—â”‚ â”‚åå­—â”‚ â”‚åå­—â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”          â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ”’ â”‚ â”‚ ğŸ”’ â”‚ â”‚ ğŸ”’ â”‚ â”‚ ğŸ”’ â”‚ â”‚ ğŸ”’ â”‚          â”‚   â”‚
â”‚  â”‚  â”‚??? â”‚ â”‚??? â”‚ â”‚??? â”‚ â”‚??? â”‚ â”‚??? â”‚          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                       â”‚
â”‚  â”Œâ”€ è¯¦æƒ… â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  å†’é™©å°å¸½                           â”‚   â”‚
â”‚  â”‚  â”‚spriteâ”‚  ç¨€æœ‰åº¦: æ™®é€š â”‚ æ§½ä½: å¤´éƒ¨          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚   â”‚
â”‚  â”‚  ä¸€é¡¶å……æ»¡å†’é™©ç²¾ç¥çš„å°å¸½å­                      â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚   â”‚
â”‚  â”‚  [ è£… å¤‡ ]                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å…³é”®è§†è§‰ç»†èŠ‚

- **æ ‡é¢˜æ **ï¼šæ·±æ£• `#A0522D` èƒŒæ™¯ï¼Œå·¦ä¾§æ”¾åƒç´ å°é“çš®å¤´åƒ + æ ‡é¢˜ï¼Œå³ä¾§æ˜¾ç¤ºç­‰çº§
- **åˆ†åŒºæ¡†**ï¼šç”¨ LabelFrame æ¨¡æ‹Ÿ fieldset/legend æ•ˆæœï¼Œæ£•è‰²è¾¹æ¡† `#C4956A`
- **é“å…·æ ¼å­**ï¼šç™½åº• `#FFF9F0`ï¼Œé€‰ä¸­æ—¶æµ…æ©™ `#FFF3E0` + æ£•è‰²æè¾¹åŠ ç²—
- **å·²è£…å¤‡æ ‡è®°**ï¼šé“å…·æ ¼å­å³ä¸Šè§’ç»¿è‰² "E" æ ‡è®°
- **é”å¤´å›¾æ ‡**ï¼šç”¨ Canvas ç”»åƒç´ é£é”å¤´ï¼ˆæ£•è‰²ç³»ï¼‰ï¼Œä¸ç”¨ç³»ç»Ÿ emoji
- **ç¨€æœ‰åº¦é¢œè‰²**ï¼šæ™®é€šç°æ£•ã€ä¼˜ç§€ç»¿ã€ç¨€æœ‰è“ã€å²è¯—ç´«ã€ä¼ è¯´é‡‘
- **æŒ‰é’®**ï¼šåƒç´ å‡¸èµ·é£æ ¼ï¼Œraised relief + æ£•è‰²é…è‰²

### 7.2 åƒç´ é”å¤´ç»˜åˆ¶

```python
def draw_pixel_lock(canvas, x, y, scale=3):
    """ç»˜åˆ¶åƒç´ é£é”å¤´å›¾æ ‡"""
    # é”æ‰£ï¼ˆUå½¢ï¼‰
    lock_shackle = [
        [0, 1, 1, 1, 0],
        [1, 0, 0, 0, 1],
        [1, 0, 0, 0, 1],
    ]
    # é”èº«
    lock_body = [
        [1, 1, 1, 1, 1],
        [1, 2, 2, 2, 1],
        [1, 2, 3, 2, 1],
        [1, 2, 2, 2, 1],
        [1, 1, 1, 1, 1],
    ]
    lock_colors = {1: '#A0522D', 2: '#8B5E3C', 3: '#D4880F'}
    shackle_color = '#C4956A'
    
    # ç”»é”æ‰£
    for ry, row in enumerate(lock_shackle):
        for rx, c in enumerate(row):
            if c:
                px, py = x + rx * scale, y + ry * scale
                canvas.create_rectangle(px, py, px+scale, py+scale,
                    fill=shackle_color, outline='')
    
    # ç”»é”èº«
    body_y = y + len(lock_shackle) * scale
    for ry, row in enumerate(lock_body):
        for rx, c in enumerate(row):
            if c:
                px, py = x + rx * scale, body_y + ry * scale
                canvas.create_rectangle(px, py, px+scale, py+scale,
                    fill=lock_colors[c], outline='')
```

### 7.3 äº¤äº’è¯´æ˜

- **å•å‡»é“å…·**ï¼šé€‰ä¸­ï¼Œæ˜¾ç¤ºè¯¦æƒ…
- **åŒå‡»é“å…·**ï¼šå¿«é€Ÿè£…å¤‡/å¸ä¸‹
- **ç‚¹å‡»è£…å¤‡æŒ‰é’®**ï¼šè£…å¤‡é€‰ä¸­é“å…·
- **ç‚¹å‡»å¸ä¸‹æŒ‰é’®**ï¼šå¸ä¸‹å¯¹åº”æ§½ä½
- **ğŸ”’ å›¾æ ‡**ï¼šåƒç´ é£é”å¤´ï¼Œhover æ˜¾ç¤ºè§£é”æ¡ä»¶

---

## ğŸ“‹ å®ç°æ­¥éª¤æ¸…å•

### ç¬¬é›¶é˜¶æ®µï¼šåŸ‹ç‚¹ï¼ˆ0.5å¤©ï¼‰
- [ ] åœ¨ save.py æ·»åŠ  behavior_stats
- [ ] åœ¨å„æ“ä½œå‡½æ•°ä¸­æ·»åŠ è®¡æ•°
- [ ] æµ‹è¯•å­˜æ¡£å…¼å®¹

### ç¬¬ä¸€é˜¶æ®µ Aï¼šæˆé•¿ç³»ç»Ÿï¼ˆ0.5å¤©ï¼‰
- [ ] æ·»åŠ  growth_data å­˜æ¡£ç»“æ„
- [ ] å®ç° add_experience() å‡½æ•°
- [ ] å®ç°å‡çº§æ£€æµ‹ + æ°”æ³¡é€šçŸ¥

### ç¬¬ä¸€é˜¶æ®µ Bï¼šå¤´é¡¶ UIï¼ˆ0.5å¤©ï¼‰
- [ ] å®ç°åŠ¨æ€ä½ç½®çš„ç­‰çº§æ ‡ç­¾æ¸²æŸ“
- [ ] âŒ ä¸éœ€è¦è¡€æ¡ï¼ä»… Lv.X æ–‡å­—

### ç¬¬äºŒé˜¶æ®µ Aï¼šé“å…·æ•°æ®ï¼ˆ0.5å¤©ï¼‰
- [ ] åˆ›å»º items.py
- [ ] æ·»åŠ  ITEM_COLORS åˆ°è°ƒè‰²æ¿
- [ ] æ·»åŠ  inventory å­˜æ¡£ç»“æ„

### ç¬¬äºŒé˜¶æ®µ Bï¼šé“å…·æ¸²æŸ“ï¼ˆ1å¤©ï¼‰
- [ ] å®ç°çŠ¶æ€åˆ¤æ–­ï¼ˆéšè—/æ˜¾ç¤ºï¼‰
- [ ] å®ç°åç§»è®¡ç®—ï¼ˆä½“å‹+çŠ¶æ€ï¼‰
- [ ] é›†æˆåˆ°ä¸»æ¸²æŸ“æµç¨‹

### ç¬¬äºŒé˜¶æ®µ Cï¼šèƒŒåŒ… UIï¼ˆ2å¤©ï¼‰
- [ ] åˆ›å»º ui_theme.pyï¼ˆWINDOW_THEME å…±äº«é…è‰²ï¼Œä¸å­¦æœ¯æ—¥æŠ¥å¤ç”¨ï¼‰
- [ ] åˆ›å»º inventory_window.py
- [ ] å®ç°æš–è‰²åƒç´ é£çª—å£ï¼ˆfieldset/legend åˆ†åŒºæ¡†é£æ ¼ï¼‰
- [ ] ç”¨ Canvas ç»˜åˆ¶åƒç´ é”å¤´å›¾æ ‡ï¼ˆä¸ç”¨ç³»ç»Ÿ emojiï¼‰
- [ ] é“å…·æ ¼å­ç”¨åƒç´ ç¼©ç•¥å›¾è€Œéæ–‡å­—
- [ ] è£…å¤‡/å¸ä¸‹/è¯¦æƒ…åŠŸèƒ½
- [ ] å³é”®èœå•å…¥å£
- [ ] å›å¤´å°†å­¦æœ¯æ—¥æŠ¥çª—å£ä¹Ÿè¿ç§»åˆ° ui_theme.py ç»Ÿä¸€é…è‰²

### ç¬¬ä¸‰é˜¶æ®µï¼šè§£é”ç³»ç»Ÿï¼ˆ0.5å¤©ï¼‰
- [ ] å®ç°è§£é”æ¡ä»¶æ£€æŸ¥
- [ ] å‡çº§/æ“ä½œåè§¦å‘æ£€æŸ¥
- [ ] è§£é”å¼¹çª—é€šçŸ¥

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹æ€»ç»“

1. **æ— è¡€æ¡**ï¼šå°é“çš®æ²¡æœ‰è¡€æ¡ï¼çŠ¶æ€é€šè¿‡è¡¨æƒ…/åŠ¨ç”»/æ°”æ³¡ä½“ç°ï¼Œå¤´é¡¶åªæ˜¾ç¤º Lv.X
2. **ç»Ÿä¸€è§†è§‰**ï¼šèƒŒåŒ…çª—å£ä¸å­¦æœ¯æ—¥æŠ¥å…±äº« `WINDOW_THEME` é…è‰²ï¼ˆå¥¶æ²¹åº•+æ£•è‰²è¾¹æ¡†ï¼‰ï¼Œå»ºè®®æŠ½å‡º `ui_theme.py`
3. **çŠ¶æ€é€‚é…**ï¼š`sleep/dizzy/dead/sick` çŠ¶æ€éšè—æ‰€æœ‰é“å…·
4. **åç§»åŸºå‡†**ï¼šæ‰€æœ‰åç§»åŸºäºè½®å»“åŒ–åçš„ç²¾çµå·¦ä¸Šè§’
5. **ä½“å‹è¡¥å¿**ï¼šfat +1x, thin -1x
6. **æ¸²æŸ“é¡ºåº**ï¼šæŠ•å½± â†’ èº«ä½“ â†’ é“å…· â†’ å¤´é¡¶ç­‰çº§æ ‡ç­¾
7. **å­˜æ¡£å…¼å®¹**ï¼šæ—§å­˜æ¡£ç¼ºå°‘å­—æ®µæ—¶ç”¨é»˜è®¤å€¼
8. **å­£èŠ‚ç³»ç»Ÿ**ï¼šç”¨é“å…·æ›¿ä»£ï¼Œå­£èŠ‚åªå½±å“è‡ªåŠ¨è£…å¤‡æç¤º
9. **æ­»äº¡å¤„ç†**ï¼šé“å…·éšè—ä½†ä¿ç•™è£…å¤‡çŠ¶æ€ï¼Œå¤æ´»åæ¢å¤
10. **åƒç´ é”å¤´**ï¼šæœªè§£é”é“å…·ç”¨ Canvas ç»˜åˆ¶åƒç´ é£é”å¤´ï¼Œä¸ç”¨ç³»ç»Ÿ emoji/Unicode
